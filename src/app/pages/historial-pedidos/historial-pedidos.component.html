<section id="content_wrapper">
  <!-- Start: Topbar-Dropdown-->

  <!-- Start: Topbar-->
  <div id="topbar" class="text-center bg-white alt ph10 br-b-ddd">
    <div>
      <h1>Historial de pedidos</h1>
    </div>
    
  </div>
  <!-- Begin: Content-->
  <section id="content" class="table-layout">
    <!-- begin: .tray-center-->
    <div class="tray tray-center" style="height: 802px;">
      <!-- create new order panel-->
      <div class="panel  ">
        
        
  
        <div class="panel-body ">
            <div class="section row">
                <div class="col-md-12">
                  
                    <div class="row  text-center element-groups-custom">
                        
                        <div class="bs-¡">
                          <!-- <a routerLink="/nuevo-producto" class="btn btn-rounded btn-system btn-block"> Producto</a> -->
                        </div>
                      </div>

                </div>
                
              </div>
        </div>
  
      </div>
      <!-- recent orders table-->
      <div class="panel">
        <!-- <div class="panel-menu p12 admin-form theme-primary">
          <div class="row">
            <div class="col-md-4">
              <label class="field select">
                <select id="filter-category" name="filter-category" class="empty">
                  <option value="0">Filter by Category</option>
                  <option value="1">Smart Phones</option>
                  <option value="2">Smart Watches</option>
                  <option value="3">Notebooks</option>
                  <option value="4">Desktops</option>
                  <option value="5">Music Players</option>
                </select><i class="arrow"></i>
              </label>
            </div>
            <div class="col-md-4 mt-10 mt-md-0">
              <label class="field select">
                <select id="filter-status" name="filter-status" class="empty">
                  <option value="0">Filter by Status</option>
                  <option value="1">Active</option>
                  <option value="2">Inactive</option>
                  <option value="3">Low Stock</option>
                  <option value="4">Out of Stock</option>
                </select><i class="arrow"></i>
              </label>
            </div>
            <div class="col-md-4 mt-10 mt-md-0">
              <label class="field select">
                <select id="bulk-action" name="bulk-action" class="empty">
                  <option value="0">Actions</option>
                  <option value="1">Edit</option>
                  <option value="2">Delete</option>
                  <option value="3">Active</option>
                  <option value="4">Inactive</option>
                </select><i class="arrow double"></i>
              </label>
            </div>
          </div>
        </div> -->
        <div class="panel-body pn">
          <div class="table-responsive of-y-a">
            <table class="table admin-form theme-warning tc-checkbox-1 fs13">
              <thead>
                <tr class="bg-light">
                  
                  <th>Id</th>
                  <th>Cliente</th>
                  <th>Fecha</th>
                  <th>Productos</th>
                  <th>Envío</th>
                  <th>Total</th>

                  <th class="text-right">Estado</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of itemsProductos | async" >
                    <ng-container *ngIf="item.estado === 'Entregado' ">
                  <td class="w100">{{item.keyPublico}}</td>
                  <td>{{item.cliente.nombre}}<br>{{item.cliente.telefono}}<br>{{item.cliente.email}}</td>
                  <td>{{item.fecha | date: 'hh:mm' }}<br>{{item.fecha | date: 'dd-MM-yyyy'}}
                    </td>
                   <td>
                    <div *ngFor="let producto of getProductos(item.productos)">
                    {{producto.unidades}} {{producto.nombre}} {{producto.importe | currency}}
                  </div> 
                </td>
                <td>
                  {{item.envio.tipo}}<br>
                  {{item.envio.costo| currency}}<br>
                </td>
                  <td>{{item.total | currency: 'MXN$'}}</td>
                  <td class="text-right">
                    <div class="btn-group text-right">
                      <button type="button" data-toggle="dropdown" aria-expanded="false" [ngClass]="getClaseEstado(item.estado)" >{{item.estado}}<span class="caret ml15"></span></button>
                      <ul role="menu" class="dropdown-menu">
                        <li><a href="tel:{{item.cliente.telefono}}">Llamar cliente</a></li>
                        <li><a [routerLink]="['/ver-direccion', item.key]">Ver dirección envío</a></li>
                        <!-- <li><a [routerLink]="['/envio', item.key]">Seleccionar envío</a></li> -->
                        <li><a [routerLink]="['/ver-venta', item.key]">Ver pedido</a></li>
                        <li class="divider"></li>
                        <!-- <li><a (click)= "updateEstado('Pagado', item.key)" >Pagar</a></li>
                        <li class=""><a (click)= "updateEstado('Enviado', item.key)">Enviar</a></li>
                        <li><a (click)= "updateEstado('Entregado', item.key)">Entregar</a></li>
                        <li><a (click)= "updateEstado('Cancelado', item.key)">Cancelar</a></li> -->
                      </ul>
                    </div>
                  </td>
                </ng-container>
                
                </tr>
                
                
                
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <!-- begin: .tray-right-->
    
  </section>
</section>